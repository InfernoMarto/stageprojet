(()=>{var t={98:function(t,e){var o="undefined"!=typeof self?self:this,r=function(){function t(){this.fetch=!1,this.DOMException=o.DOMException}return t.prototype=o,new t}();!function(t){!function(e){var o="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,n="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function f(t){var e=new FileReader,o=y(e);return e.readAsArrayBuffer(t),o}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:o&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&n&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,o,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,o=y(e=new FileReader),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),r=0;r<e.length;r++)o[r]=String.fromCharCode(e[r]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=u(t),e=p(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},d.prototype.delete=function(t){delete this.map[u(t)]},d.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},d.prototype.set=function(t,e){this.map[u(t)]=p(e)},d.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),l(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),l(t)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var o,r,n=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=(o=e.method||this.method||"GET").toUpperCase(),b.indexOf(r)>-1?r:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var o=t.split("="),r=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}})),e}function O(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},m.call(v.prototype),m.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var j=[301,302,303,307,308];O.redirect=function(t,e){if(-1===j.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function P(t,o){return new Promise((function(r,i){var s=new v(t,o);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,o={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var o=t.split(":"),r=o.shift().trim();if(r){var n=o.join(":").trim();e.append(r,n)}})),e)};o.url="responseURL"in a?a.responseURL:o.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;r(new O(n,o))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}P.polyfill=!0,t.fetch||(t.fetch=P,t.Headers=d,t.Request=v,t.Response=O),e.Headers=d,e.Request=v,e.Response=O,e.fetch=P,Object.defineProperty(e,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=r;(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e},875:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=875,t.exports=e}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t={useSsl:!1,useJsonp:!1},e=function(){return(e=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const r=function(){function t(t){var e=t.text,o=t.ip,r=t.bounds,n=t.locale,i=t.limit,s=void 0===i?5:i;if(this.limit=5,this.text=e,this.ip=o,!e&&!o)throw new Error('Either "text" or "ip" parameter is required.');if(r&&(!r.latitudeSW||!r.longitudeSW||!r.latitudeNE||!r.longitudeNE))throw new Error('The "bounds" parameter must be an object with the keys: "latitudeSW", "longitudeSW", "latitudeNE", "longitudeNE".');this.bounds=r,this.locale=n,this.limit=s}return t.create=function(t){return new this(t)},t.prototype.toObject=function(){return{text:this.text,ip:this.ip,bounds:this.bounds,locale:this.locale,limit:this.limit}},t.prototype.withText=function(t){return this.constructor.create(e(e({},this.toObject()),{text:t}))},t.prototype.withIp=function(t){return this.constructor.create(e(e({},this.toObject()),{ip:t}))},t.prototype.withBounds=function(t){return this.constructor.create(e(e({},this.toObject()),{bounds:t}))},t.prototype.withLocale=function(t){return this.constructor.create(e(e({},this.toObject()),{locale:t}))},t.prototype.withLimit=function(t){return this.constructor.create(e(e({},this.toObject()),{limit:t}))},t.prototype.getText=function(){return this.text},t.prototype.getIp=function(){return this.ip},t.prototype.getBounds=function(){return this.bounds},t.prototype.getLocale=function(){return this.locale},t.prototype.getLimit=function(){return this.limit},t}();var n=function(){return(n=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const i=function(){function t(t){var e=t.coordinates,o=t.locale,r=t.limit,n=void 0===r?5:r;if(this.limit=5,e&&(!e.latitude||!e.longitude))throw new Error('The "coordinates" parameter must be an object with the keys: "latitude", "longitude".');this.coordinates=e,this.locale=o,this.limit=n}return t.create=function(t){return new this(t)},t.prototype.toObject=function(){return{coordinates:this.coordinates,locale:this.locale,limit:this.limit}},t.prototype.withCoordinates=function(t){return this.constructor.create(n(n({},this.toObject()),{coordinates:t}))},t.prototype.withLocale=function(t){return this.constructor.create(n(n({},this.toObject()),{locale:t}))},t.prototype.withLimit=function(t){return this.constructor.create(n(n({},this.toObject()),{limit:t}))},t.prototype.getCoordinates=function(){return this.coordinates},t.prototype.getLocale=function(){return this.locale},t.prototype.getLimit=function(){return this.limit},t}();var s=function(){return"undefined"!=typeof window},a=function(t){return Object.keys(t).reduce((function(e,o){var r=e,n=t[o];return void 0!==n&&(r[o]=n),r}),{})};const c=function(){function t(){}return t.getGeocodeQueryFromParameter=function(t,e){return void 0===e&&(e=r),"string"==typeof t?(o=t,new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$").test(o)||function(t){return new RegExp("^((?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(:[a-fA-F\\d]{1,4}){1,2}|:)|(?:[a-fA-F\\d]{1,4}:){4}(?:(:[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(:[a-fA-F\\d]{1,4}){1,3}|:)|(?:[a-fA-F\\d]{1,4}:){3}(?:(:[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(:[a-fA-F\\d]{1,4}){1,4}|:)|(?:[a-fA-F\\d]{1,4}:){2}(?:(:[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(:[a-fA-F\\d]{1,4}){1,5}|:)|(?:[a-fA-F\\d]{1,4}:){1}(?:(:[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(:[a-fA-F\\d]{1,4}){1,6}|:)|(?::((?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:)))(%[0-9a-zA-Z]{1,})?$").test(t)}(t)?e.create({ip:t}):e.create({text:t})):t instanceof e?t:e.create(t);var o},t.getReverseQueryFromParameters=function(t,e,o){if(void 0===o&&(o=i),"number"==typeof t||"string"==typeof t){if("number"!=typeof e&&"string"!=typeof e)throw new Error("The second parameter of geodecode must be a longitude if the first one is a latitude");return o.create({coordinates:{latitude:t,longitude:e}})}return t instanceof o?t:o.create(t)},t.getCallbackFromParameters=function(t,e){return"number"!=typeof t&&"string"!=typeof t?t:e||void 0},t.getErrorCallbackFromParameters=function(t,e,o){return o||("number"!=typeof t&&"string"!=typeof t?e:void 0)},t}();var u=function(){return(u=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const p=function(){function t(t){var e=t.coordinates,o=t.bounds,r=t.formattedAddress,n=t.streetNumber,i=t.streetName,s=t.subLocality,a=t.locality,c=t.postalCode,u=t.region,p=t.adminLevels,l=t.country,d=t.countryCode,h=t.timezone;this.coordinates=e,this.bounds=o,this.formattedAddress=r,this.streetNumber=n,this.streetName=i,this.subLocality=s,this.locality=a,this.postalCode=c,this.region=u,this.adminLevels=p||[],this.country=l,this.countryCode=d,this.timezone=h}return t.create=function(t){return new this(t)},t.prototype.toObject=function(){return{coordinates:this.coordinates,bounds:this.bounds,formattedAddress:this.formattedAddress,streetNumber:this.streetNumber,streetName:this.streetName,subLocality:this.subLocality,locality:this.locality,postalCode:this.postalCode,region:this.region,adminLevels:this.adminLevels,country:this.country,countryCode:this.countryCode,timezone:this.timezone}},t.prototype.withBounds=function(t){return this.constructor.create(u(u({},this.toObject()),{bounds:t}))},t.prototype.withCoordinates=function(t){return this.constructor.create(u(u({},this.toObject()),{coordinates:t}))},t.prototype.getCoordinates=function(){return this.coordinates},t.prototype.getBounds=function(){return this.bounds},t.prototype.getFormattedAddress=function(){return this.formattedAddress},t.prototype.getStreetNumber=function(){return this.streetNumber},t.prototype.getStreetName=function(){return this.streetName},t.prototype.getSubLocality=function(){return this.subLocality},t.prototype.getLocality=function(){return this.locality},t.prototype.getPostalCode=function(){return this.postalCode},t.prototype.getRegion=function(){return this.region},t.prototype.addAdminLevel=function(t){this.adminLevels.push(t)},t.prototype.getAdminLevels=function(){return this.adminLevels},t.prototype.getCountry=function(){return this.country},t.prototype.getCountryCode=function(){return this.countryCode},t.prototype.getTimezone=function(){return this.timezone},t}();var l,d=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),h=function(){return(h=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const y=function(t){function e(e){var o=e.attribution,r=e.precision,n=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["attribution","precision"]),i=t.call(this,n)||this;return i.attribution=o,i.precision=r,i}return d(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return h(h({},t.prototype.toObject.call(this)),{attribution:this.attribution,precision:this.precision})},e.prototype.withAttribution=function(t){return new e(h(h({},this.toObject()),{attribution:t}))},e.prototype.getAttribution=function(){return this.attribution},e.prototype.withPrecision=function(t){return new e(h(h({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e}(p);var f;!function(t){t[t.STATE_CODE=1]="STATE_CODE",t[t.COUNTY_CODE=2]="COUNTY_CODE"}(f||(f={}));const g=function(){function t(t){var e=t.level,o=t.name,r=t.code;this.level=e,this.name=o,this.code=r}return t.create=function(t){return new this(t)},t.prototype.toObject=function(){return{level:this.level,name:this.name,code:this.code}},t.prototype.getLevel=function(){return this.level},t.prototype.getName=function(){return this.name},t.prototype.getCode=function(){return this.code},t}();var m=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();const b=function(t){function e(o,r){var n=t.call(this,o)||this;return n.name="ResponseError",n.response=r,n.__proto__=e.prototype,n}return m(e,t),e.prototype.getResponse=function(){return this.response},e}(Error);var v=function(){return(v=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},w=v(v({},t),{apiKey:""});const O=function(){function t(t,e){if(void 0===e&&(e=w),this.externalLoader=t,this.options=v(v({},w),e),!this.options.apiKey)throw new Error('An API key is required for the Bing provider. Please add it in the "apiKey" option.')}return t.prototype.geocode=function(t,e,o){var r=this,n=c.getGeocodeQueryFromParameter(t);if(n.getIp())throw new Error("The Bing provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"dev.virtualearth.net",pathname:"REST/v1/Locations/"+n.getText()});var i=this.withCommonParams({maxRes:n.getLimit()?n.getLimit().toString():void 0},n);return e?this.executeRequest(i,e,{},{},o):new Promise((function(t,e){return r.executeRequest(i,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n=this,i=c.getReverseQueryFromParameters(t,e),s=c.getCallbackFromParameters(e,o),a=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"dev.virtualearth.net",pathname:"REST/v1/Locations/"+i.getCoordinates().latitude+","+i.getCoordinates().longitude});var u=this.withCommonParams({},i);return s?this.executeRequest(u,s,{},{},a):new Promise((function(t,e){return n.executeRequest(u,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){return v(v({},t),{key:this.options.apiKey,incl:"ciso2",c:e.getLocale(),jsonpCallback:this.options.useJsonp?"jsonp":void 0})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){o(e.resourceSets[0].resources.map((function(o){return t.mapToGeocoded(o,e.copyright)})))}),r,n,(function(t){t.getResponse().json().then((function(t){var e=t.errorDetails&&t.errorDetails.length>0?t.errorDetails[0]:t.statusDescription||"";i?i(new b(e,t)):setTimeout((function(){throw new Error(e)}))}))}))},t.mapToGeocoded=function(t,e){var o=t.point.coordinates[0],r=t.point.coordinates[1],n=t.address.formattedAddress,i=t.address.addressLine,s=t.address,a=s.locality,c=s.postalCode,u=t.address.adminDistrict,p=t.address.countryRegion,l=t.address.countryRegionIso2,d=t.confidence,h=y.create({coordinates:{latitude:o,longitude:r},formattedAddress:n,streetName:i,locality:a,postalCode:c,region:u,country:p,countryCode:l,attribution:e,precision:d});return h=h.withBounds({latitudeSW:t.bbox[0],longitudeSW:t.bbox[1],latitudeNE:t.bbox[2],longitudeNE:t.bbox[3]}),["adminDistrict","adminDistrict2"].forEach((function(e,o){t.address[e]&&h.addAdminLevel(g.create({level:o+1,name:t.address[e]||""}))})),h},t}();var j=function(){return(j=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},P=j(j({},t),{providers:[]});const _=function(){function t(t){void 0===t&&(t=P),this.options=t}return t.prototype.geocode=function(t,e,o){var r=this;return this.options.parallelize||this.options.first?e?this.geocodeAllProviders(t,e,o):new Promise((function(e,o){return r.geocodeAllProviders(t,(function(t){return e(t)}),(function(t){return o(t)}))})):e?this.geocodeNextProvider(this.options.providers,t,e,o):new Promise((function(e,o){return r.geocodeNextProvider(r.options.providers,t,(function(t){return e(t)}),(function(t){return o(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n=this,i=c.getReverseQueryFromParameters(t,e),s=c.getCallbackFromParameters(e,o),a=c.getErrorCallbackFromParameters(e,o,r);return this.options.parallelize||this.options.first?s?this.geodecodeAllProviders(i,s,a):new Promise((function(t,e){return n.geodecodeAllProviders(i,(function(e){return t(e)}),(function(t){return e(t)}))})):s?this.geodecodeNextProvider(this.options.providers,i,s,a):new Promise((function(t,e){return n.geodecodeNextProvider(n.options.providers,i,(function(e){return t(e)}),(function(t){return e(t)}))}))},t.prototype.geocodeNextProvider=function(t,e,o,r){var n=this,i=t[0],s=t.slice(1),a=function(t){t.length>0?o(t):n.geocodeNextProvider(s,e,o,r)};i.geocode(e,a,(function(t){r&&r(t),r||console.error("An error has occurred when geocoding with the provider "+i.constructor.name,t),a([])}))},t.prototype.geodecodeNextProvider=function(t,e,o,r){var n=this,i=t[0],s=t.slice(1),a=function(t){t.length>0?o(t):n.geodecodeNextProvider(s,e,o,r)};i.geodecode(e,a,(function(t){r&&r(t),r||console.error("An error has occurred when geodecoding with the provider "+i.constructor.name,t),a([])}))},t.prototype.geocodeAllProviders=function(t,e,o){var r=this,n=new Map,i=!1,s=function(t){return function(o){n.set(t,o);var s=r.options.providers.reduce((function(t,e){var o=t;if(void 0===o&&r.options.first&&(o=[]),void 0!==o)return o.length>0?o:n.get(e.constructor.name)}),[]);!i&&s&&(e(s),i=!0)}};this.options.providers.forEach((function(e){var r=e.constructor.name;e.geocode(t,s(r),function(t){return function(e){o&&o(e),o||console.error("An error has occurred when geocoding with the provider "+t,e),s(t)([])}}(r))}))},t.prototype.geodecodeAllProviders=function(t,e,o){var r=this,n=new Map,i=!1,s=function(t){return function(o){n.set(t,o);var s=r.options.providers.reduce((function(t,e){var o=t;if(void 0===o&&r.options.first&&(o=[]),void 0!==o)return o.length>0?o:n.get(e.constructor.name)}),[]);!i&&s&&(e(s),i=!0)}};this.options.providers.forEach((function(e){var r=e.constructor.name;e.geodecode(t,s(r),function(t){return function(e){o&&o(e),o||console.error("An error has occurred when geodecoding with the provider "+t,e),s(t)([])}}(r))}))},t.prototype.executeRequest=function(t,e,o,r,n){throw new Error("executeRequest cannot be called directly from the chain provider.")},t}();var x=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),C=function(){return(C=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const E=function(t){function e(e){var o=e.attribution,r=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["attribution"]),n=t.call(this,r)||this;return n.attribution=o,n}return x(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return C(C({},t.prototype.toObject.call(this)),{attribution:this.attribution})},e.prototype.withAttribution=function(t){return new e(C(C({},this.toObject()),{attribution:t}))},e.prototype.getAttribution=function(){return this.attribution},e}(p);var S=function(){return(S=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const T=function(){function e(e,o){void 0===o&&(o=t),this.externalLoader=e,this.options=S(S({},t),o)}return e.prototype.geocode=function(t,e,o){var r=this,n=c.getGeocodeQueryFromParameter(t);if(n.getText())throw new Error("The GeoPlugin provider does not support location geocoding, only IP geolocation.");if(["127.0.0.1","::1"].includes(n.getIp()||"")){var i=E.create({locality:"localhost",country:"localhost"});return e?e([i]):new Promise((function(t){return t([i])}))}this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"www.geoplugin.net",pathname:"json.gp"});var s={ip:n.getIp()||""};return e?this.executeRequest(s,e,{},{},o):new Promise((function(t,e){return r.executeRequest(s,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},e.prototype.geodecode=function(t,e,o,r){throw new Error("The GeoPlugin provider does not support reverse geocoding.")},e.prototype.executeRequest=function(t,o,r,n,i){this.externalLoader.executeRequest(t,(function(t){if(![200,206].includes(t.geoplugin_status)){var r="An error has occurred. Status: "+t.geoplugin_status+".";return i?void i(new b(r,t)):void setTimeout((function(){throw new Error(r)}))}o([e.mapToGeocoded(t)])}),r,n,i)},e.mapToGeocoded=function(t){var e=parseFloat(t.geoplugin_latitude),o=parseFloat(t.geoplugin_longitude),r=t.geoplugin_city||void 0,n=t.geoplugin_region||void 0,i=t.geoplugin_countryName||void 0,s=t.geoplugin_countryCode||void 0,a=t.geoplugin_timezone||void 0,c=[],u=t.geoplugin_credit||void 0;return t.geoplugin_regionName&&c.push(g.create({level:f.STATE_CODE,name:t.geoplugin_regionName,code:t.geoplugin_regionCode||void 0})),E.create({coordinates:{latitude:e,longitude:o},locality:r,region:n,adminLevels:c,country:i,countryCode:s,timezone:a,attribution:u})},e}();var A=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),L=function(){return(L=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const I=function(t){function e(e){var o=e.countryCodes,r=e.components,n=e.channel,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","components","channel"]),s=t.call(this,i)||this;if(o&&1!==o.length)throw new Error('The "countryCodes" parameter must have only one country code top-level domain.');return s.countryCodes=o,s.components=r,s.channel=n,s}return A(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return L(L({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,components:this.components,channel:this.channel})},e.prototype.withCountryCodes=function(t){return new e(L(L({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withComponents=function(t){return new e(L(L({},this.toObject()),{components:t}))},e.prototype.getComponents=function(){return this.components},e.prototype.withChannel=function(t){return new e(L(L({},this.toObject()),{channel:t}))},e.prototype.getChannel=function(){return this.channel},e}(r);var R=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),k=function(){return(k=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const N=function(t){function e(e){var o=e.types,r=e.precisions,n=e.channel,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["types","precisions","channel"]),s=t.call(this,i)||this;return s.types=o,s.precisions=r,s.channel=n,s}return R(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return k(k({},t.prototype.toObject.call(this)),{types:this.types,precisions:this.precisions,channel:this.channel})},e.prototype.withTypes=function(t){return new e(k(k({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withPrecisions=function(t){return new e(k(k({},this.toObject()),{precisions:t}))},e.prototype.getPrecisions=function(){return this.precisions},e.prototype.withChannel=function(t){return new e(k(k({},this.toObject()),{channel:t}))},e.prototype.getChannel=function(){return this.channel},e}(i);var q=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),F=function(){return(F=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const B=function(t){function e(e){var o=e.placeId,r=e.partialMatch,n=e.types,i=e.precision,s=e.streetAddress,a=e.intersection,c=e.political,u=e.colloquialArea,p=e.ward,l=e.neighborhood,d=e.premise,h=e.subpremise,y=e.naturalFeature,f=e.airport,g=e.park,m=e.pointOfInterest,b=e.establishment,v=e.postalCodeSuffix,w=e.subLocalityLevels,O=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["placeId","partialMatch","types","precision","streetAddress","intersection","political","colloquialArea","ward","neighborhood","premise","subpremise","naturalFeature","airport","park","pointOfInterest","establishment","postalCodeSuffix","subLocalityLevels"]),j=t.call(this,O)||this;return j.placeId=o,j.partialMatch=r,j.types=n,j.precision=i,j.streetAddress=s,j.intersection=a,j.political=c,j.colloquialArea=u,j.ward=p,j.neighborhood=l,j.premise=d,j.subpremise=h,j.naturalFeature=y,j.airport=f,j.park=g,j.pointOfInterest=m,j.establishment=b,j.postalCodeSuffix=v,j.subLocalityLevels=w||[],j}return q(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return F(F({},t.prototype.toObject.call(this)),{placeId:this.placeId,partialMatch:this.partialMatch,types:this.types,precision:this.precision,streetAddress:this.streetAddress,intersection:this.intersection,political:this.political,colloquialArea:this.colloquialArea,ward:this.ward,neighborhood:this.neighborhood,premise:this.premise,subpremise:this.subpremise,naturalFeature:this.naturalFeature,airport:this.airport,park:this.park,pointOfInterest:this.pointOfInterest,establishment:this.establishment,postalCodeSuffix:this.postalCodeSuffix,subLocalityLevels:this.subLocalityLevels})},e.prototype.withPlaceId=function(t){return new e(F(F({},this.toObject()),{placeId:t}))},e.prototype.getPlaceId=function(){return this.placeId},e.prototype.withPartialMatch=function(t){return new e(F(F({},this.toObject()),{partialMatch:t}))},e.prototype.isPartialMatch=function(){return this.partialMatch},e.prototype.withTypes=function(t){return new e(F(F({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withPrecision=function(t){return new e(F(F({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e.prototype.withStreetAddress=function(t){return new e(F(F({},this.toObject()),{streetAddress:t}))},e.prototype.getStreetAddress=function(){return this.streetAddress},e.prototype.withIntersection=function(t){return new e(F(F({},this.toObject()),{intersection:t}))},e.prototype.getIntersection=function(){return this.intersection},e.prototype.withPolitical=function(t){return new e(F(F({},this.toObject()),{political:t}))},e.prototype.getPolitical=function(){return this.political},e.prototype.withColloquialArea=function(t){return new e(F(F({},this.toObject()),{colloquialArea:t}))},e.prototype.getColloquialArea=function(){return this.colloquialArea},e.prototype.withWard=function(t){return new e(F(F({},this.toObject()),{ward:t}))},e.prototype.getWard=function(){return this.ward},e.prototype.withNeighborhood=function(t){return new e(F(F({},this.toObject()),{neighborhood:t}))},e.prototype.getNeighborhood=function(){return this.neighborhood},e.prototype.withPremise=function(t){return new e(F(F({},this.toObject()),{premise:t}))},e.prototype.getPremise=function(){return this.premise},e.prototype.withSubpremise=function(t){return new e(F(F({},this.toObject()),{subpremise:t}))},e.prototype.getSubpremise=function(){return this.subpremise},e.prototype.withNaturalFeature=function(t){return new e(F(F({},this.toObject()),{naturalFeature:t}))},e.prototype.getNaturalFeature=function(){return this.naturalFeature},e.prototype.withAirport=function(t){return new e(F(F({},this.toObject()),{airport:t}))},e.prototype.getAirport=function(){return this.airport},e.prototype.withPark=function(t){return new e(F(F({},this.toObject()),{park:t}))},e.prototype.getPark=function(){return this.park},e.prototype.withPointOfInterest=function(t){return new e(F(F({},this.toObject()),{pointOfInterest:t}))},e.prototype.getPointOfInterest=function(){return this.pointOfInterest},e.prototype.withEstablishment=function(t){return new e(F(F({},this.toObject()),{establishment:t}))},e.prototype.getEstablishment=function(){return this.establishment},e.prototype.withPostalCodeSuffix=function(t){return new e(F(F({},this.toObject()),{postalCodeSuffix:t}))},e.prototype.getPostalCodeSuffix=function(){return this.postalCodeSuffix},e.prototype.addSubLocalityLevel=function(t){this.subLocalityLevels.push(t)},e.prototype.getSubLocalityLevels=function(){return this.subLocalityLevels},e}(p);var M=function(){return(M=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const D=function(){function e(e,o){if(void 0===o&&(o=t),this.externalLoader=e,this.options=M(M({},t),o),!this.options.apiKey&&!this.options.clientId)throw new Error('An API key or a client ID is required for the Google Maps provider. Please add it in the "apiKey" or the "clientId" option.');if(this.options.clientId&&!this.options.secret)throw new Error('An URL signing secret is required if you use a client ID (Premium only). Please add it in the "secret" option.');if(this.options.secret&&s())throw new Error('The "secret" option cannot be used in a browser environment.');if(this.options.countryCodes&&1!==this.options.countryCodes.length)throw new Error('The "countryCodes" option must have only one country code top-level domain.')}return e.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l=this,d=c.getGeocodeQueryFromParameter(t,I);if(d.getIp())throw new Error("The GoogleMaps provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"maps.googleapis.com",pathname:"maps/api/geocode/json"});var h=this.withCommonParams({address:d.getText(),bounds:d.getBounds()?(null===(r=d.getBounds())||void 0===r?void 0:r.latitudeSW)+","+(null===(n=d.getBounds())||void 0===n?void 0:n.longitudeSW)+"|"+(null===(i=d.getBounds())||void 0===i?void 0:i.latitudeNE)+","+(null===(s=d.getBounds())||void 0===s?void 0:s.longitudeNE):void 0,components:d.getComponents()?null===(a=d.getComponents())||void 0===a?void 0:a.map((function(t){return t.name+":"+t.value})).join("|"):void 0,region:d.getCountryCodes()?null===(u=d.getCountryCodes())||void 0===u?void 0:u.join(","):null===(p=this.options.countryCodes)||void 0===p?void 0:p.join(",")},d);return e?this.executeRequest(h,e,{},{},o):new Promise((function(t,e){return l.executeRequest(h,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},e.prototype.geodecode=function(t,e,o,r){var n,i,s=this,a=c.getReverseQueryFromParameters(t,e,N),u=c.getCallbackFromParameters(e,o),p=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"maps.googleapis.com",pathname:"maps/api/geocode/json"});var l=this.withCommonParams({latlng:a.getCoordinates().latitude+","+a.getCoordinates().longitude,result_type:a.getTypes()?null===(n=a.getTypes())||void 0===n?void 0:n.join("|"):void 0,location_type:a.getPrecisions()?null===(i=a.getPrecisions())||void 0===i?void 0:i.join("|"):void 0},a);return u?this.executeRequest(l,u,{},{},p):new Promise((function(t,e){return s.executeRequest(l,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},e.prototype.withCommonParams=function(t,o){var r=M(M({},t),{key:this.options.apiKey,client:this.options.clientId,channel:o.getChannel(),language:o.getLocale(),limit:o.getLimit().toString()});return this.options.secret&&(r=M(M({},r),{signature:e.signQuery(this.options.secret,this.externalLoader.getOptions().pathname||"",r)})),r},e.prototype.executeRequest=function(t,o,r,n,i){var s=t.limit,a=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(t,["limit"]);this.externalLoader.executeRequest(a,(function(t){var r;switch(t.status){case"REQUEST_DENIED":r="Request has been denied",t.error_message&&(r+=": "+t.error_message);break;case"OVER_QUERY_LIMIT":r="Exceeded daily quota when attempting geocoding request",t.error_message&&(r+=": "+t.error_message);break;case"OVER_DAILY_LIMIT":r="API usage has been limited",t.error_message&&(r+=": "+t.error_message);break;case"INVALID_REQUEST":r="The request is invalid",t.error_message&&(r+=": "+t.error_message);break;case"UNKNOWN_ERROR":r="Unknown error",t.error_message&&(r+=": "+t.error_message)}if(r&&i)i(new b(r,t));else if(r)setTimeout((function(){throw new Error(r)}));else{var n=t.results,a=n.length-parseInt(s||n.length.toString(),10);a>0&&n.splice(-a),o(n.map((function(t){return e.mapToGeocoded(t)})))}}),r,n,i)},e.mapToGeocoded=function(t){var e,o,r,n,i,s,a,c,u,p,l,d,h,y,f,m,b,v,w,O,j,P,_=t.geometry.location.lat,x=t.geometry.location.lng,C=t.formatted_address,E=[],S=t.place_id,T=t.partial_match,A=t.types,L=t.geometry.location_type,I=[];t.address_components.forEach((function(t){t.types.forEach((function(_){switch(_){case"street_number":e=t.long_name;break;case"route":o=t.long_name;break;case"sublocality":r=t.long_name;break;case"locality":case"postal_town":n=t.long_name;break;case"postal_code":i=t.long_name;break;case"administrative_area_level_1":case"administrative_area_level_2":case"administrative_area_level_3":case"administrative_area_level_4":case"administrative_area_level_5":"administrative_area_level_1"===_&&(s=t.long_name),E.push(g.create({level:parseInt(_.substr(-1),10),name:t.long_name,code:t.short_name}));break;case"sublocality_level_1":case"sublocality_level_2":case"sublocality_level_3":case"sublocality_level_4":case"sublocality_level_5":I.push(g.create({level:parseInt(_.substr(-1),10),name:t.long_name,code:t.short_name}));break;case"country":a=t.long_name,c=t.short_name;break;case"street_address":u=t.long_name;break;case"intersection":p=t.long_name;break;case"political":l=t.long_name;break;case"colloquial_area":d=t.long_name;break;case"ward":h=t.long_name;break;case"neighborhood":y=t.long_name;break;case"premise":f=t.long_name;break;case"subpremise":m=t.long_name;break;case"natural_feature":b=t.long_name;break;case"airport":v=t.long_name;break;case"park":w=t.long_name;break;case"point_of_interest":O=t.long_name;break;case"establishment":j=t.long_name;break;case"postal_code_suffix":P=t.long_name}}))}));var R=B.create({coordinates:{latitude:_,longitude:x},formattedAddress:C,streetNumber:e,streetName:o,subLocality:r,locality:n,postalCode:i,region:s,country:a,countryCode:c,adminLevels:E,placeId:S,partialMatch:T,types:A,precision:L,streetAddress:u,intersection:p,political:l,colloquialArea:d,ward:h,neighborhood:y,premise:f,subpremise:m,naturalFeature:b,airport:v,park:w,pointOfInterest:O,establishment:j,postalCodeSuffix:P,subLocalityLevels:I});if(t.geometry.bounds){var k=t.geometry.bounds;R=R.withBounds({latitudeSW:k.southwest.lat,longitudeSW:k.southwest.lng,latitudeNE:k.northeast.lat,longitudeNE:k.northeast.lng})}else if(t.geometry.viewport){var N=t.geometry.viewport;R=R.withBounds({latitudeSW:N.southwest.lat,longitudeSW:N.southwest.lng,latitudeNE:N.northeast.lat,longitudeNE:N.northeast.lng})}else"ROOFTOP"===L&&(R=R.withBounds({latitudeSW:_,longitudeSW:x,latitudeNE:_,longitudeNE:x}));return R},e.signQuery=function(t,e,r){var n=("function"==typeof require?require:o(875))("crypto"),i=a(r),c=function(t){if(s())throw new Error("decodeBase64 can only be used in a Node environment.");return Buffer.from(t,"base64").toString()}(t.replace(/-/g,"+").replace(/_/g,"/")),u=e+"?"+new URLSearchParams(i).toString();return n.createHmac("sha1",c).update(u).digest("base64").replace(/\+/g,"-").replace(/\//g,"_")},e}();var U=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),z=function(){return(z=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const G=function(t){function e(e){var o=e.countryCodes,r=e.excludePlaceIds,n=e.bounded,i=e.bounds,s=e.dedupe,a=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","excludePlaceIds","bounded","bounds","dedupe"]),c=t.call(this,z({bounds:i},a))||this;if(c.countryCodes=o,c.excludePlaceIds=r,n&&!i)throw new Error('The "bounded" parameter can only be used with the "bounds" parameter.');return c.bounded=n,c.dedupe=s,c}return U(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return z(z({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,excludePlaceIds:this.excludePlaceIds,bounded:this.bounded,dedupe:this.dedupe})},e.prototype.withCountryCodes=function(t){return new e(z(z({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withExcludePlaceIds=function(t){return new e(z(z({},this.toObject()),{excludePlaceIds:t}))},e.prototype.getExcludePlaceIds=function(){return this.excludePlaceIds},e.prototype.withBounded=function(t){return new e(z(z({},this.toObject()),{bounded:t}))},e.prototype.getBounded=function(){return this.bounded},e.prototype.withDedupe=function(t){return new e(z(z({},this.toObject()),{dedupe:t}))},e.prototype.getDedupe=function(){return this.dedupe},e}(r);var W=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),K=function(){return(K=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Q=function(t){function e(e){var o=e.zoom,r=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["zoom"]),n=t.call(this,r)||this;return n.zoom=o,n}return W(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return K(K({},t.prototype.toObject.call(this)),{zoom:this.zoom})},e.prototype.withZoom=function(t){return new e(K(K({},this.toObject()),{zoom:t}))},e.prototype.getZoom=function(){return this.zoom},e}(i);var H=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),J=function(){return(J=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Y=function(t){function e(e){var o=e.placeId,r=e.displayName,n=e.osmId,i=e.osmType,s=e.categories,a=e.types,c=e.distance,u=e.precision,p=e.precisionCode,l=e.precisionType,d=e.attribution,h=e.subLocalityLevels,y=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["placeId","displayName","osmId","osmType","categories","types","distance","precision","precisionCode","precisionType","attribution","subLocalityLevels"]),f=t.call(this,y)||this;return f.placeId=o,f.displayName=r,f.osmId=n,f.osmType=i,f.categories=s,f.types=a,f.distance=c,f.precision=u,f.precisionCode=p,f.precisionType=l,f.attribution=d,f.subLocalityLevels=h||[],f}return H(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return J(J({},t.prototype.toObject.call(this)),{placeId:this.placeId,displayName:this.displayName,osmId:this.osmId,osmType:this.osmType,categories:this.categories,types:this.types,distance:this.distance,precision:this.precision,precisionCode:this.precisionCode,precisionType:this.precisionType,attribution:this.attribution,subLocalityLevels:this.subLocalityLevels})},e.prototype.withPlaceId=function(t){return new e(J(J({},this.toObject()),{placeId:t}))},e.prototype.getPlaceId=function(){return this.placeId},e.prototype.withDisplayName=function(t){return new e(J(J({},this.toObject()),{displayName:t}))},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.withOsmId=function(t){return new e(J(J({},this.toObject()),{osmId:t}))},e.prototype.getOsmId=function(){return this.osmId},e.prototype.withOsmType=function(t){return new e(J(J({},this.toObject()),{osmType:t}))},e.prototype.getOsmType=function(){return this.osmType},e.prototype.withCategories=function(t){return new e(J(J({},this.toObject()),{categories:t}))},e.prototype.getCategories=function(){return this.categories},e.prototype.withTypes=function(t){return new e(J(J({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withDistance=function(t){return new e(J(J({},this.toObject()),{distance:t}))},e.prototype.getDistance=function(){return this.distance},e.prototype.withPrecision=function(t){return new e(J(J({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e.prototype.withPrecisionCode=function(t){return new e(J(J({},this.toObject()),{precisionCode:t}))},e.prototype.getPrecisionCode=function(){return this.precisionCode},e.prototype.withPrecisionType=function(t){return new e(J(J({},this.toObject()),{precisionType:t}))},e.prototype.getPrecisionType=function(){return this.precisionType},e.prototype.withAttribution=function(t){return new e(J(J({},this.toObject()),{attribution:t}))},e.prototype.getAttribution=function(){return this.attribution},e.prototype.addSubLocalityLevel=function(t){this.subLocalityLevels.push(t)},e.prototype.getSubLocalityLevels=function(){return this.subLocalityLevels},e}(p);var Z=function(){return(Z=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},V=Z(Z({},t),{apiKey:"",source:"locationiq"});const $=function(){function t(t,e){if(void 0===e&&(e=V),this.externalLoader=t,this.options=Z(Z({},V),e),!this.options.apiKey)throw new Error('An API key is required for the LocationIQ provider. Please add it in the "apiKey" option.');if(!["locationiq","nominatim"].includes(this.options.source||""))throw new Error('The "source" option must either be "locationiq" or "nominatim".')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l,d,h=this,y=c.getGeocodeQueryFromParameter(t,G);if(y.getIp())throw new Error("The LocationIQ provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"locationiq.com",pathname:"v1/search.php"});var f=this.withCommonParams({q:y.getText(),limit:y.getLimit().toString(),countrycodes:y.getCountryCodes()?null===(r=y.getCountryCodes())||void 0===r?void 0:r.join(","):null===(n=this.options.countryCodes)||void 0===n?void 0:n.join(","),exclude_place_ids:y.getExcludePlaceIds()?null===(i=y.getExcludePlaceIds())||void 0===i?void 0:i.join(","):void 0,viewbox:y.getBounds()?(null===(s=y.getBounds())||void 0===s?void 0:s.longitudeSW)+","+(null===(a=y.getBounds())||void 0===a?void 0:a.latitudeSW)+","+(null===(u=y.getBounds())||void 0===u?void 0:u.longitudeNE)+","+(null===(p=y.getBounds())||void 0===p?void 0:p.latitudeNE):void 0,bounded:y.getBounded()?null===(l=y.getBounded())||void 0===l?void 0:l.toString():void 0,dedupe:y.getDedupe()?null===(d=y.getDedupe())||void 0===d?void 0:d.toString():void 0,matchquality:"1"},y);return e?this.executeRequest(f,e,{},{},o):new Promise((function(t,e){return h.executeRequest(f,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n,i=this,s=c.getReverseQueryFromParameters(t,e,Q),a=c.getCallbackFromParameters(e,o),u=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"locationiq.com",pathname:"v1/reverse.php"});var p=this.withCommonParams({lat:s.getCoordinates().latitude.toString(),lon:s.getCoordinates().longitude.toString(),zoom:(null===(n=s.getZoom())||void 0===n?void 0:n.toString())||"18",showdistance:"1"},s);return a?this.executeRequest(p,a,{},{},u):new Promise((function(t,e){return i.executeRequest(p,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){return Z(Z({},t),{key:this.options.apiKey||"",format:"json",addressdetails:"1","accept-language":e.getLocale(),jsonpCallback:this.options.useJsonp?"json_callback":void 0,normalizeaddress:"1",normalizecity:"1",statecode:"1",postaladdress:"1",source:"nominatim"===this.options.source?"nom":void 0})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){var r=e;if(!Array.isArray(e)){if(e.error){var n="An error has occurred: "+e.error;return i?void i(new b(n,e)):void setTimeout((function(){throw new Error(n)}))}r=[e]}o(r.map((function(e){return t.mapToGeocoded(e)})))}),r,n,i)},t.mapToGeocoded=function(t){var e,o,r,n=parseFloat(t.lat),i=parseFloat(t.lon),s=t.postal_address,a=t.display_name,c=t.address.house_number,u=t.address.road,p=t.address.suburb,l=t.address.city,d=t.address.postcode?t.address.postcode.split(";")[0]:void 0,h=t.address.state,y=t.address.country,f=t.address.country_code,m=t.place_id,b=t.osm_id,v=t.osm_type,w=t.class?[t.class]:[],O=t.distance,j=t.type?[t.type]:[],P=null===(e=t.matchquality)||void 0===e?void 0:e.matchlevel,_=null===(o=t.matchquality)||void 0===o?void 0:o.matchcode,x=null===(r=t.matchquality)||void 0===r?void 0:r.matchtype,C=t.licence,E=Y.create({coordinates:{latitude:n,longitude:i},formattedAddress:s,displayName:a,streetNumber:c,streetName:u,subLocality:p,locality:l,postalCode:d,region:h,country:y,countryCode:f,placeId:m,osmId:b,osmType:v,categories:w,types:j,distance:O,precision:P,precisionCode:_,precisionType:x,attribution:C});return E=E.withBounds({latitudeSW:parseFloat(t.boundingbox[0]),longitudeSW:parseFloat(t.boundingbox[2]),latitudeNE:parseFloat(t.boundingbox[1]),longitudeNE:parseFloat(t.boundingbox[3])}),["state","county"].forEach((function(e,o){t.address[e]&&E.addAdminLevel(g.create({level:o+1,name:t.address[e]||"",code:"state"===e?t.address.state_code:void 0}))})),["suburb","neighbourhood","road","name"].forEach((function(e,o){t.address[e]&&E.addSubLocalityLevel(g.create({level:o+1,name:t.address[e]||""}))})),E},t}();var X=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),tt=function(){return(tt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const et=function(t){function e(e){var o=e.countryCodes,r=e.proximity,n=e.types,i=e.fuzzyMatch,s=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","proximity","types","fuzzyMatch"]),a=t.call(this,s)||this;if(a.countryCodes=o,r&&(!r.latitude||!r.longitude))throw new Error('The "proximity" parameter must be an object with the keys: "latitude", "longitude".');return a.proximity=r,a.types=n,a.fuzzyMatch=i,a}return X(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return tt(tt({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,proximity:this.proximity,types:this.types,fuzzyMatch:this.fuzzyMatch})},e.prototype.withCountryCodes=function(t){return new e(tt(tt({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withProximity=function(t){return new e(tt(tt({},this.toObject()),{proximity:t}))},e.prototype.getProximity=function(){return this.proximity},e.prototype.withTypes=function(t){return new e(tt(tt({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withFuzzyMatch=function(t){return new e(tt(tt({},this.toObject()),{fuzzyMatch:t}))},e.prototype.getFuzzyMatch=function(){return this.fuzzyMatch},e}(r);var ot=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),rt=function(){return(rt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const nt=function(t){function e(e){var o=e.countryCodes,r=e.reverseMode,n=e.types,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","reverseMode","types"]),s=t.call(this,i)||this;return s.countryCodes=o,s.reverseMode=r,s.types=n,s}return ot(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return rt(rt({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,reverseMode:this.reverseMode,types:this.types})},e.prototype.withCountryCodes=function(t){return new e(rt(rt({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withReverseMode=function(t){return new e(rt(rt({},this.toObject()),{reverseMode:t}))},e.prototype.getReverseMode=function(){return this.reverseMode},e.prototype.withTypes=function(t){return new e(rt(rt({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e}(i);var it=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),st=function(){return(st=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const at=function(t){function e(e){var o=e.types,r=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["types"]),n=t.call(this,r)||this;return n.types=o,n}return it(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return st(st({},t.prototype.toObject.call(this)),{types:this.types})},e.prototype.withTypes=function(t){return new e(st(st({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e}(p);var ct,ut=function(){return(ut=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};!function(t){t.SOURCE_PLACES="mapbox.places",t.SOURCE_PLACES_PERMANENT="mapbox.places-permanent"}(ct||(ct={}));var pt=ut(ut({},t),{apiKey:"",source:ct.SOURCE_PLACES});const lt=function(){function t(t,e){if(void 0===e&&(e=pt),this.externalLoader=t,this.options=ut(ut({},pt),e),!this.options.apiKey)throw new Error('An API key is required for the Mapbox provider. Please add it in the "apiKey" option.');if(![ct.SOURCE_PLACES,ct.SOURCE_PLACES_PERMANENT].includes(this.options.source||""))throw new Error('The "source" option must either be "'+ct.SOURCE_PLACES+'" or "'+ct.SOURCE_PLACES_PERMANENT+'".')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l=this,d=c.getGeocodeQueryFromParameter(t,et);if(d.getIp())throw new Error("The Mapbox provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"api.mapbox.com",pathname:"geocoding/v5/"+this.options.source+"/"+d.getText()+".json"});var h=d.getFuzzyMatch()?"true":"false",y=this.withCommonParams({bbox:d.getBounds()?(null===(r=d.getBounds())||void 0===r?void 0:r.longitudeSW)+","+(null===(n=d.getBounds())||void 0===n?void 0:n.latitudeSW)+","+(null===(i=d.getBounds())||void 0===i?void 0:i.longitudeNE)+","+(null===(s=d.getBounds())||void 0===s?void 0:s.latitudeNE):void 0,fuzzyMatch:void 0!==d.getFuzzyMatch()?h:void 0,proximity:d.getProximity()?(null===(a=d.getProximity())||void 0===a?void 0:a.longitude)+","+(null===(u=d.getProximity())||void 0===u?void 0:u.latitude):void 0,types:d.getTypes()?null===(p=d.getTypes())||void 0===p?void 0:p.join(","):void 0},d);return e?this.executeRequest(y,e,{},{},o):new Promise((function(t,e){return l.executeRequest(y,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n,i=this,s=c.getReverseQueryFromParameters(t,e,nt),a=c.getCallbackFromParameters(e,o),u=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"api.mapbox.com",pathname:"geocoding/v5/"+this.options.source+"/"+s.getCoordinates().longitude+","+s.getCoordinates().latitude+".json"});var p=this.withCommonParams({reverseMode:s.getReverseMode()?s.getReverseMode():void 0,types:s.getTypes()?null===(n=s.getTypes())||void 0===n?void 0:n.join(","):"address"},s);return a?this.executeRequest(p,a,{},{},u):new Promise((function(t,e){return i.executeRequest(p,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){var o,r;return ut(ut({},t),{access_token:this.options.apiKey||"",country:e.getCountryCodes()?null===(o=e.getCountryCodes())||void 0===o?void 0:o.join(","):null===(r=this.options.countryCodes)||void 0===r?void 0:r.join(","),language:e.getLocale(),limit:e.getLimit().toString()})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){o(e.features.map((function(e){return t.mapToGeocoded(e)})))}),r,n,i)},t.mapToGeocoded=function(t){var e,o,r,n,i,s,a=t.geometry.coordinates[1],c=t.geometry.coordinates[0],u=t.place_name,p=t.address,l=t.text,d=[],h=t.place_type;(t.context||[]).forEach((function(t){switch(t.id.split(".")[0]){case"locality":e=t.text;break;case"place":e=t.text,d.push(g.create({level:f.COUNTY_CODE,name:e}));break;case"postcode":o=t.text;break;case"region":r=t.text,s=void 0,t.short_code&&t.short_code.match(/[A-z]{2}-/)&&(s=t.short_code.replace(/[A-z]{2}-/,"")),d.push(g.create({level:f.STATE_CODE,name:r,code:s}));break;case"country":n=t.text,i=t.short_code}}));var y=at.create({coordinates:{latitude:a,longitude:c},formattedAddress:u,streetNumber:p,streetName:l,locality:e,postalCode:o,region:r,adminLevels:d,country:n,countryCode:i,types:h});return t.bbox&&(y=y.withBounds({latitudeSW:t.bbox[1],longitudeSW:t.bbox[0],latitudeNE:t.bbox[3],longitudeNE:t.bbox[2]})),y},t}();var dt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),ht=function(){return(ht=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const yt=function(t){function e(o){var r=o.location,n=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(o,["location"]),i=t.call(this,ht(ht({},n),{text:r?"from_location":n.text}))||this;if(!r)return i;if("getLatLng"in r)return i.location=r.toObject(),i;if("getLocality"in r)return i.location=e.convertGeocodedToLocationObject(r),i;var s=0,a=0,c=p.create({}).toObject();return Object.keys(c).forEach((function(t){t in r&&(s+=1)})),["street","adminArea5","city","adminArea4","county","adminArea3","state","adminArea1","country","postalCode","type"].forEach((function(t){t in r&&(a+=1)})),s>a?(i.location=e.convertGeocodedToLocationObject(p.create(r)),i):(i.location=r,i)}return dt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return ht(ht({},t.prototype.toObject.call(this)),{location:this.location})},e.prototype.withLocation=function(t){return new e(ht(ht({},this.toObject()),{location:t}))},e.prototype.getLocation=function(){return this.location},e.convertGeocodedToLocationObject=function(t){var e={},o=[t.getStreetNumber()||"",t.getStreetName()||""].join(" ");return o&&(e.street=o),t.getLocality()&&(e.city=t.getLocality()),t.getCountry()&&(e.country=t.getCountry()),t.getPostalCode()&&(e.postalCode=t.getPostalCode()),t.getAdminLevels().forEach((function(t){t.getLevel()===f.STATE_CODE&&(e.state=t.getCode()||t.getName()),t.getLevel()===f.COUNTY_CODE&&(e.county=t.getCode()||t.getName())})),e},e}(r);var ft=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),gt=function(){return(gt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const mt=function(t){function e(e){var o=e.precision,r=e.precisionCode,n=e.mapUrl,i=e.attribution,s=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["precision","precisionCode","mapUrl","attribution"]),a=t.call(this,s)||this;return a.precision=o,a.precisionCode=r,a.mapUrl=n,a.attribution=i,a}return ft(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return gt(gt({},t.prototype.toObject.call(this)),{precision:this.precision,precisionCode:this.precisionCode,mapUrl:this.mapUrl,attribution:this.attribution})},e.prototype.withPrecision=function(t){return new e(gt(gt({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e.prototype.withPrecisionCode=function(t){return new e(gt(gt({},this.toObject()),{precisionCode:t}))},e.prototype.getPrecisionCode=function(){return this.precisionCode},e.prototype.withMapUrl=function(t){return new e(gt(gt({},this.toObject()),{mapUrl:t}))},e.prototype.getMapUrl=function(){return this.mapUrl},e.prototype.withAttribution=function(t){return new e(gt(gt({},this.toObject()),{attribution:t}))},e.prototype.getAttribution=function(){return this.attribution},e}(p);var bt=function(){return(bt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},vt=bt(bt({},t),{apiKey:"",method:"GET",source:"mapquest"});const wt=function(){function t(t,e){if(void 0===e&&(e=vt),this.externalLoader=t,this.options=bt(bt({},vt),e),!this.options.apiKey)throw new Error('An API key is required for the MapQuest provider. Please add it in the "apiKey" option.');if(!["GET","POST"].includes(this.options.method||""))throw new Error('The "method" option must either be "GET" or "POST".');if(!["mapquest","nominatim"].includes(this.options.source||""))throw new Error('The "source" option must either be "mapquest" or "nominatim".')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l,d=this,h=c.getGeocodeQueryFromParameter(t,yt);if(h.getIp())throw new Error("The MapQuest provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({method:this.options.method,protocol:this.options.useSsl?"https":"http",host:"nominatim"===this.options.source?"open.mapquestapi.com":"www.mapquestapi.com",pathname:"geocoding/v1/address"});var y={boundingBox:h.getBounds()?(null===(r=h.getBounds())||void 0===r?void 0:r.latitudeNE)+","+(null===(n=h.getBounds())||void 0===n?void 0:n.longitudeSW)+","+(null===(i=h.getBounds())||void 0===i?void 0:i.latitudeSW)+","+(null===(s=h.getBounds())||void 0===s?void 0:s.longitudeNE):void 0,maxResults:h.getLimit().toString()};y=h.getLocation()?bt(bt({},h.getLocation()),y):bt({location:h.getText()},y),y="GET"===this.options.method?y:{};var f=this.withCommonParams(y),g="POST"===this.options.method?{location:h.getLocation()?h.getLocation():h.getText(),options:{boundingBox:h.getBounds()?{ul:{lat:null===(a=h.getBounds())||void 0===a?void 0:a.latitudeNE,lng:null===(u=h.getBounds())||void 0===u?void 0:u.longitudeSW},lr:{lat:null===(p=h.getBounds())||void 0===p?void 0:p.latitudeSW,lng:null===(l=h.getBounds())||void 0===l?void 0:l.longitudeNE}}:void 0,maxResults:h.getLimit().toString()}}:{};return e?this.executeRequest(f,e,{},g,o):new Promise((function(t,e){return d.executeRequest(f,(function(e){return t(e)}),{},g,(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n=this,i=c.getReverseQueryFromParameters(t,e),s=c.getCallbackFromParameters(e,o),a=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({method:this.options.method,protocol:this.options.useSsl?"https":"http",host:"nominatim"===this.options.source?"open.mapquestapi.com":"www.mapquestapi.com",pathname:"geocoding/v1/reverse"});var u="GET"===this.options.method?{location:i.getCoordinates().latitude+","+i.getCoordinates().longitude}:{},p=this.withCommonParams(u),l="POST"===this.options.method?{location:{latLng:{lat:i.getCoordinates().latitude,lng:i.getCoordinates().longitude}}}:{};return s?this.executeRequest(p,s,{},l,a):new Promise((function(t,e){return n.executeRequest(p,(function(e){return t(e)}),{},l,(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t){return bt(bt({},t),{key:this.options.apiKey||"",jsonpCallback:this.options.useJsonp?"callback":void 0})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){if(0!==e.info.statuscode){var r="An error has occurred ("+e.info.statuscode+"): "+e.info.messages.join(" / ");return i?void i(new b(r,e)):void setTimeout((function(){throw new Error(r)}))}o(e.results[0].locations.map((function(o){return t.mapToGeocoded(o,e.info.copyright.text)})))}),r,n,i)},t.mapToGeocoded=function(t,e){var o=t.latLng.lat,r=t.latLng.lng,n=t.street,i=t.adminArea6,s=t.adminArea5,a=t.postalCode,c=t.adminArea4,u=t.adminArea1,p=t.adminArea1,l=t.geocodeQuality,d=t.geocodeQualityCode,h=t.mapUrl,y=mt.create({coordinates:{latitude:o,longitude:r},streetName:n,subLocality:i,locality:s,postalCode:a,region:c,country:u,countryCode:p,attribution:e,precision:l,precisionCode:d,mapUrl:h});return t.adminArea3&&y.addAdminLevel(g.create({level:f.STATE_CODE,name:t.adminArea3,code:2===t.adminArea3.length?t.adminArea3:void 0})),t.adminArea4&&y.addAdminLevel(g.create({level:f.COUNTY_CODE,name:t.adminArea4})),y},t}();var Ot=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),jt=function(){return(jt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Pt=function(t){function e(e){var o=e.countryCodes,r=e.excludePlaceIds,n=e.bounded,i=e.bounds,s=e.dedupe,a=e.shape,c=e.shapeThreshold,u=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","excludePlaceIds","bounded","bounds","dedupe","shape","shapeThreshold"]),p=t.call(this,jt({bounds:i},u))||this;if(p.countryCodes=o,p.excludePlaceIds=r,n&&!i)throw new Error('The "bounded" parameter can only be used with the "bounds" parameter.');if(p.bounded=n,p.dedupe=s,a&&!["geojson","kml","svg","text"].includes(a))throw new Error('The "shape" parameter can only have the following values: "geojson", "kml", "svg", "text".');return p.shape=a,p.shapeThreshold=c,p}return Ot(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return jt(jt({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,excludePlaceIds:this.excludePlaceIds,bounded:this.bounded,dedupe:this.dedupe,shape:this.shape,shapeThreshold:this.shapeThreshold})},e.prototype.withCountryCodes=function(t){return new e(jt(jt({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withExcludePlaceIds=function(t){return new e(jt(jt({},this.toObject()),{excludePlaceIds:t}))},e.prototype.getExcludePlaceIds=function(){return this.excludePlaceIds},e.prototype.withBounded=function(t){return new e(jt(jt({},this.toObject()),{bounded:t}))},e.prototype.getBounded=function(){return this.bounded},e.prototype.withDedupe=function(t){return new e(jt(jt({},this.toObject()),{dedupe:t}))},e.prototype.getDedupe=function(){return this.dedupe},e.prototype.withShape=function(t){return new e(jt(jt({},this.toObject()),{shape:t}))},e.prototype.getShape=function(){return this.shape},e.prototype.withShapeThreshold=function(t){return new e(jt(jt({},this.toObject()),{shapeThreshold:t}))},e.prototype.getShapeThreshold=function(){return this.shapeThreshold},e}(r);var _t=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),xt=function(){return(xt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Ct=function(t){function e(e){var o=e.zoom,r=e.shape,n=e.shapeThreshold,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["zoom","shape","shapeThreshold"]),s=t.call(this,i)||this;if(s.zoom=o,r&&!["geojson","kml","svg","text"].includes(r))throw new Error('The "shape" parameter can only have the following values: "geojson", "kml", "svg", "text".');return s.shape=r,s.shapeThreshold=n,s}return _t(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return xt(xt({},t.prototype.toObject.call(this)),{zoom:this.zoom,shape:this.shape,shapeThreshold:this.shapeThreshold})},e.prototype.withZoom=function(t){return new e(xt(xt({},this.toObject()),{zoom:t}))},e.prototype.getZoom=function(){return this.zoom},e.prototype.withShape=function(t){return new e(xt(xt({},this.toObject()),{shape:t}))},e.prototype.getShape=function(){return this.shape},e.prototype.withShapeThreshold=function(t){return new e(xt(xt({},this.toObject()),{shapeThreshold:t}))},e.prototype.getShapeThreshold=function(){return this.shapeThreshold},e}(i);var Et=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),St=function(){return(St=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Tt=function(t){function e(e){var o=e.displayName,r=e.osmId,n=e.osmType,i=e.categories,s=e.types,a=e.attribution,c=e.subLocalityLevels,u=e.shape,p=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["displayName","osmId","osmType","categories","types","attribution","subLocalityLevels","shape"]),l=t.call(this,p)||this;return l.displayName=o,l.osmId=r,l.osmType=n,l.categories=i,l.types=s,l.attribution=a,l.subLocalityLevels=c||[],l.shape=u,l}return Et(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return St(St({},t.prototype.toObject.call(this)),{displayName:this.displayName,osmId:this.osmId,osmType:this.osmType,categories:this.categories,types:this.types,attribution:this.attribution,subLocalityLevels:this.subLocalityLevels,shape:this.shape})},e.prototype.withDisplayName=function(t){return new e(St(St({},this.toObject()),{displayName:t}))},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.withOsmId=function(t){return new e(St(St({},this.toObject()),{osmId:t}))},e.prototype.getOsmId=function(){return this.osmId},e.prototype.withOsmType=function(t){return new e(St(St({},this.toObject()),{osmType:t}))},e.prototype.getOsmType=function(){return this.osmType},e.prototype.withCategories=function(t){return new e(St(St({},this.toObject()),{categories:t}))},e.prototype.getCategories=function(){return this.categories},e.prototype.withTypes=function(t){return new e(St(St({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withAttribution=function(t){return new e(St(St({},this.toObject()),{attribution:t}))},e.prototype.getAttribution=function(){return this.attribution},e.prototype.addSubLocalityLevel=function(t){this.subLocalityLevels.push(t)},e.prototype.getSubLocalityLevels=function(){return this.subLocalityLevels},e.prototype.withShape=function(t){return new e(St(St({},this.toObject()),{shape:t}))},e.prototype.getShape=function(){return this.shape},e}(p);var At=function(){return(At=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},Lt=At(At({},t),{host:"nominatim.openstreetmap.org",userAgent:""});const It=function(){function t(t,e){if(void 0===e&&(e=Lt),this.externalLoader=t,this.options=At(At({},Lt),e),this.options.host===Lt.host&&!this.options.userAgent)throw new Error('An User-Agent identifying your application is required for the OpenStreetMap / Nominatim provider when using the default host. Please add it in the "userAgent" option.')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l,d,h=this,y=c.getGeocodeQueryFromParameter(t,Pt);if(y.getIp())throw new Error("The OpenStreetMap / Nominatim provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:this.options.host,pathname:"search"});var f=this.withCommonParams({q:y.getText(),limit:y.getLimit().toString(),countrycodes:y.getCountryCodes()?null===(r=y.getCountryCodes())||void 0===r?void 0:r.join(","):null===(n=this.options.countryCodes)||void 0===n?void 0:n.join(","),exclude_place_ids:y.getExcludePlaceIds()?null===(i=y.getExcludePlaceIds())||void 0===i?void 0:i.join(","):void 0,viewbox:y.getBounds()?(null===(s=y.getBounds())||void 0===s?void 0:s.longitudeSW)+","+(null===(a=y.getBounds())||void 0===a?void 0:a.latitudeSW)+","+(null===(u=y.getBounds())||void 0===u?void 0:u.longitudeNE)+","+(null===(p=y.getBounds())||void 0===p?void 0:p.latitudeNE):void 0,bounded:y.getBounded()?null===(l=y.getBounded())||void 0===l?void 0:l.toString():void 0,dedupe:y.getDedupe()?null===(d=y.getDedupe())||void 0===d?void 0:d.toString():void 0},y);return e?this.executeRequest(f,e,this.getHeaders(),{},o):new Promise((function(t,e){return h.executeRequest(f,(function(e){return t(e)}),h.getHeaders(),{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n,i=this,s=c.getReverseQueryFromParameters(t,e,Ct),a=c.getCallbackFromParameters(e,o),u=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:this.options.host,pathname:"reverse"});var p=this.withCommonParams({lat:s.getCoordinates().latitude.toString(),lon:s.getCoordinates().longitude.toString(),zoom:(null===(n=s.getZoom())||void 0===n?void 0:n.toString())||"18"},s);return a?this.executeRequest(p,a,this.getHeaders(),{},u):new Promise((function(t,e){return i.executeRequest(p,(function(e){return t(e)}),i.getHeaders(),{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){var o;return At(At({},t),{format:"jsonv2",addressdetails:"1",polygon_geojson:e.getShape()&&"geojson"===e.getShape()?"1":void 0,polygon_kml:e.getShape()&&"kml"===e.getShape()?"1":void 0,polygon_svg:e.getShape()&&"svg"===e.getShape()?"1":void 0,polygon_text:e.getShape()&&"text"===e.getShape()?"1":void 0,polygon_threshold:e.getShapeThreshold()?null===(o=e.getShapeThreshold())||void 0===o?void 0:o.toString():void 0,jsonpCallback:this.options.useJsonp?"json_callback":void 0,"accept-language":e.getLocale()})},t.prototype.getHeaders=function(){return{"User-Agent":this.options.userAgent||"",Referer:this.options.referer}},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){var r=e;if(!Array.isArray(e)){if(e.error){var n="An error has occurred: "+e.error;return i?void i(new b(n,e)):void setTimeout((function(){throw new Error(n)}))}r=[e]}o(r.map((function(e){return t.mapToGeocoded(e)})))}),r,n,i)},t.mapToGeocoded=function(t){var e,o=parseFloat(t.lat),r=parseFloat(t.lon),n=t.display_name,i=t.address.house_number,s=t.address.road||t.address.pedestrian,a=t.address.suburb,c=t.address.postcode?t.address.postcode.split(";")[0]:void 0,u=t.address.state,p=t.address.country,l=t.address.country_code,d=t.osm_id,h=t.osm_type,y=[t.category],f=[t.type],m=t.licence,b=t.geojson||t.geokml||t.svg||t.geotext;["city","town","village","hamlet"].forEach((function(o){t.address[o]&&!e&&(e=t.address[o])}));var v=Tt.create({coordinates:{latitude:o,longitude:r},displayName:n,streetNumber:i,streetName:s,subLocality:a,locality:e,postalCode:c,region:u,country:p,countryCode:l,osmId:d,osmType:h,categories:y,types:f,attribution:m,shape:b});return v=v.withBounds({latitudeSW:parseFloat(t.boundingbox[0]),longitudeSW:parseFloat(t.boundingbox[2]),latitudeNE:parseFloat(t.boundingbox[1]),longitudeNE:parseFloat(t.boundingbox[3])}),["state","county"].forEach((function(e,o){t.address[e]&&v.addAdminLevel(g.create({level:o+1,name:t.address[e]||""}))})),[["city_district","district","borough","suburb","subdivision"],["hamlet","croft","isolated_dwelling"],["neighbourhood","allotments","quarter"],["city_block","residental","farm","farmyard","industrial","commercial","retail"],["road"],["house_name"]].forEach((function(e,o){e.forEach((function(e){t.address[e]&&v.addSubLocalityLevel(g.create({level:o+1,name:t.address[e]||""}))}))})),v},t}();var Rt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),kt=function(){return(kt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Nt=function(t){function e(e){var o=e.countryCodes,r=e.proximity,n=e.minPrecision,i=e.noRecord,s=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","proximity","minPrecision","noRecord"]),a=t.call(this,s)||this;if(a.countryCodes=o,r&&(!r.latitude||!r.longitude))throw new Error('The "proximity" parameter must be an object with the keys: "latitude", "longitude".');if(a.proximity=r,n&&(n.toString()!==parseInt(n.toString(),10).toString()||n<1||n>10))throw new Error('The "minPrecision" parameter must be an integer from 1 to 10.');return a.minPrecision=n,a.noRecord=i,a}return Rt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return kt(kt({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,proximity:this.proximity,minPrecision:this.minPrecision,noRecord:this.noRecord})},e.prototype.withCountryCodes=function(t){return new e(kt(kt({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withProximity=function(t){return new e(kt(kt({},this.toObject()),{proximity:t}))},e.prototype.getProximity=function(){return this.proximity},e.prototype.withMinPrecision=function(t){return new e(kt(kt({},this.toObject()),{minPrecision:t}))},e.prototype.getMinPrecision=function(){return this.minPrecision},e.prototype.withNoRecord=function(t){return new e(kt(kt({},this.toObject()),{noRecord:t}))},e.prototype.getNoRecord=function(){return this.noRecord},e}(r);var qt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ft=function(){return(Ft=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Bt=function(t){function e(e){var o=e.countryCodes,r=e.minPrecision,n=e.noRecord,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["countryCodes","minPrecision","noRecord"]),s=t.call(this,i)||this;if(s.countryCodes=o,r&&(r.toString()!==parseInt(r.toString(),10).toString()||r<1||r>10))throw new Error('The "minPrecision" parameter must be an integer from 1 to 10.');return s.minPrecision=r,s.noRecord=n,s}return qt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return Ft(Ft({},t.prototype.toObject.call(this)),{countryCodes:this.countryCodes,minPrecision:this.minPrecision,noRecord:this.noRecord})},e.prototype.withCountryCodes=function(t){return new e(Ft(Ft({},this.toObject()),{countryCodes:t}))},e.prototype.getCountryCodes=function(){return this.countryCodes},e.prototype.withMinPrecision=function(t){return new e(Ft(Ft({},this.toObject()),{minPrecision:t}))},e.prototype.getMinPrecision=function(){return this.minPrecision},e.prototype.withNoRecord=function(t){return new e(Ft(Ft({},this.toObject()),{noRecord:t}))},e.prototype.getNoRecord=function(){return this.noRecord},e}(i);var Mt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Dt=function(){return(Dt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Ut=function(t){function e(e){var o=e.callingCode,r=e.flag,n=e.precision,i=e.mgrs,s=e.maidenhead,a=e.geohash,c=e.what3words,u=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["callingCode","flag","precision","mgrs","maidenhead","geohash","what3words"]),p=t.call(this,u)||this;return p.callingCode=o,p.flag=r,p.precision=n,p.mgrs=i,p.maidenhead=s,p.geohash=a,p.what3words=c,p}return Mt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return Dt(Dt({},t.prototype.toObject.call(this)),{callingCode:this.callingCode,flag:this.flag,precision:this.precision,mgrs:this.mgrs,maidenhead:this.maidenhead,geohash:this.geohash,what3words:this.what3words})},e.prototype.withCallingCode=function(t){return new e(Dt(Dt({},this.toObject()),{callingCode:t}))},e.prototype.getCallingCode=function(){return this.callingCode},e.prototype.withFlag=function(t){return new e(Dt(Dt({},this.toObject()),{flag:t}))},e.prototype.getFlag=function(){return this.flag},e.prototype.withPrecision=function(t){return new e(Dt(Dt({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e.prototype.withMgrs=function(t){return new e(Dt(Dt({},this.toObject()),{mgrs:t}))},e.prototype.getMgrs=function(){return this.mgrs},e.prototype.withMaidenhead=function(t){return new e(Dt(Dt({},this.toObject()),{maidenhead:t}))},e.prototype.getMaidenhead=function(){return this.maidenhead},e.prototype.withGeohash=function(t){return new e(Dt(Dt({},this.toObject()),{geohash:t}))},e.prototype.getGeohash=function(){return this.geohash},e.prototype.withWhat3words=function(t){return new e(Dt(Dt({},this.toObject()),{what3words:t}))},e.prototype.getWhat3words=function(){return this.what3words},e}(p);var zt=function(){return(zt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},Gt=zt(zt({},t),{apiKey:""});const Wt=function(){function t(t,e){if(void 0===e&&(e=Gt),this.externalLoader=t,this.options=zt(zt({},Gt),e),!this.options.apiKey)throw new Error('An API key is required for the OpenCage provider. Please add it in the "apiKey" option.')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p=this,l=c.getGeocodeQueryFromParameter(t,Nt);if(l.getIp())throw new Error("The OpenCage provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"api.opencagedata.com",pathname:"geocode/v1/json"});var d=this.withCommonParams({q:l.getText()||"",bounds:l.getBounds()?(null===(r=l.getBounds())||void 0===r?void 0:r.longitudeSW)+","+(null===(n=l.getBounds())||void 0===n?void 0:n.latitudeSW)+","+(null===(i=l.getBounds())||void 0===i?void 0:i.longitudeNE)+","+(null===(s=l.getBounds())||void 0===s?void 0:s.latitudeNE):void 0,proximity:l.getProximity()?(null===(a=l.getProximity())||void 0===a?void 0:a.latitude)+","+(null===(u=l.getProximity())||void 0===u?void 0:u.longitude):void 0},l);return e?this.executeRequest(d,e,{},{},o):new Promise((function(t,e){return p.executeRequest(d,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n=this,i=c.getReverseQueryFromParameters(t,e,Bt),s=c.getCallbackFromParameters(e,o),a=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"api.opencagedata.com",pathname:"geocode/v1/json"});var u=this.withCommonParams({q:i.getCoordinates().latitude+","+i.getCoordinates().longitude},i);return s?this.executeRequest(u,s,{},{},a):new Promise((function(t,e){return n.executeRequest(u,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){var o,r,n,i;return zt(zt({},t),{key:this.options.apiKey||"",countrycode:e.getCountryCodes()?null===(o=e.getCountryCodes())||void 0===o?void 0:o.join(","):null===(r=this.options.countryCodes)||void 0===r?void 0:r.join(","),language:e.getLocale(),limit:e.getLimit().toString(),min_confidence:null===(n=e.getMinPrecision())||void 0===n?void 0:n.toString(),no_record:null===(i=e.getNoRecord())||void 0===i?void 0:i.toString(),jsonpCallback:this.options.useJsonp?"jsonp":void 0})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){o(e.results.map((function(e){return t.mapToGeocoded(e)})))}),r,n,(function(t){t.getResponse().json().then((function(t){if(t.status){var e;switch(t.status.code){case 400:e="Invalid request (400): "+t.status.message;break;case 401:e="Unable to authenticate (401): "+t.status.message;break;case 402:e="Quota exceeded (402): "+t.status.message;break;case 403:e="Forbidden (403): "+t.status.message;break;case 404:e="Invalid API endpoint (404): "+t.status.message;break;case 405:e="Method not allowed (405): "+t.status.message;break;case 408:e="Timeout (408): "+t.status.message;break;case 410:e="Request too long (410): "+t.status.message;break;case 429:e="Too many requests (429): "+t.status.message;break;case 503:e="Internal server error (503): "+t.status.message;break;default:e="Error ("+t.status.code+"): "+t.status.message}if(i)return void i(new b(e,t));setTimeout((function(){throw new Error(e)}))}}))}))},t.mapToGeocoded=function(t){var e,o=t.geometry.lat,r=t.geometry.lng,n=t.formatted,i=t.components.house_number,s=t.components.postcode,a=t.components.state,c=t.components.country,u=t.components.country_code,p=t.annotations.timezone.name,l=t.annotations.callingcode,d=t.annotations.flag,h=t.confidence,y=t.annotations.MGRS,f=t.annotations.Maidenhead,m=t.annotations.geohash,b=null===(e=t.annotations.what3words)||void 0===e?void 0:e.words,v=t.components.road||t.components.footway||t.components.street||t.components.street_name||t.components.residential||t.components.path||t.components.pedestrian||t.components.road_reference||t.components.road_reference_intl,w=t.components.neighbourhood||t.components.suburb||t.components.city_district||t.components.district||t.components.quarter||t.components.houses||t.components.subdivision,O=t.components.city||t.components.town||t.components.municipality||t.components.village||t.components.hamlet||t.components.locality||t.components.croft,j=Ut.create({coordinates:{latitude:o,longitude:r},formattedAddress:n,streetNumber:i,streetName:v,subLocality:w,locality:O,postalCode:s,region:a,country:c,countryCode:u,timezone:p,callingCode:l,flag:d,precision:h,mgrs:y,maidenhead:f,geohash:m,what3words:b});return t.bounds&&(j=j.withBounds({latitudeSW:t.bounds.southwest.lat,longitudeSW:t.bounds.southwest.lng,latitudeNE:t.bounds.northeast.lat,longitudeNE:t.bounds.northeast.lng})),[{nameKey:"state",codeKey:"state_code"},{nameKey:"county",codeKey:"county_code"}].forEach((function(e,o){var r=e.nameKey,n=e.codeKey;t.components[r]&&j.addAdminLevel(g.create({level:o+1,name:t.components[r]||"",code:t.components[n]||void 0}))})),j},t}();var Kt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Qt=function(){return(Qt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Ht=function(t){function e(e){var o=e.bounded,r=e.proximity,n=e.span,i=e.skip,s=e.bounds,a=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["bounded","proximity","span","skip","bounds"]),c=t.call(this,Qt({bounds:s},a))||this;if(o&&(!s||!r))throw new Error('The "bounded" parameter can only be used with the "bounds" or "proximity" parameter.');if(c.bounded=o,r&&(!r.latitude||!r.longitude))throw new Error('The "proximity" parameter must be an object with the keys: "latitude", "longitude".');if(c.proximity=r,n&&!r)throw new Error('The "proximity" parameter must be defined to use the "span" parameter.');if(n&&(!n.spanLatitude||!n.spanLongitude))throw new Error('The "span" parameter must be an object with the keys: "spanLatitude", "spanLongitude".');if(c.span=n,s&&r)throw new Error('The "bounds" and "proximity" parameters cannot be used at the same time.');return c.skip=i,c}return Kt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return Qt(Qt({},t.prototype.toObject.call(this)),{bounded:this.bounded,proximity:this.proximity,span:this.span,skip:this.skip})},e.prototype.withBounded=function(t){return new e(Qt(Qt({},this.toObject()),{bounded:t}))},e.prototype.getBounded=function(){return this.bounded},e.prototype.withProximity=function(t){return new e(Qt(Qt({},this.toObject()),{proximity:t}))},e.prototype.getProximity=function(){return this.proximity},e.prototype.withSpan=function(t){return new e(Qt(Qt({},this.toObject()),{span:t}))},e.prototype.getSpan=function(){return this.span},e.prototype.withSkip=function(t){return new e(Qt(Qt({},this.toObject()),{skip:t}))},e.prototype.getSkip=function(){return this.skip},e}(r);var Jt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),Yt=function(){return(Yt=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Zt=function(t){function e(e){var o=e.types,r=e.skip,n=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["types","skip"]),i=t.call(this,n)||this;if(o&&o.length>1)throw new Error('The "types" parameter must contain only one location type.');return i.types=o,i.skip=r,i}return Jt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return Yt(Yt({},t.prototype.toObject.call(this)),{types:this.types,skip:this.skip})},e.prototype.withTypes=function(t){return new e(Yt(Yt({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withSkip=function(t){return new e(Yt(Yt({},this.toObject()),{skip:t}))},e.prototype.getSkip=function(){return this.skip},e}(i);var Vt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),$t=function(){return($t=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const Xt=function(t){function e(e){var o=e.types,r=e.precision,n=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["types","precision"]),i=t.call(this,n)||this;return i.types=o,i.precision=r,i}return Vt(e,t),e.create=function(t){return new this(t)},e.prototype.toObject=function(){return $t($t({},t.prototype.toObject.call(this)),{types:this.types,precision:this.precision})},e.prototype.withTypes=function(t){return new e($t($t({},this.toObject()),{types:t}))},e.prototype.getTypes=function(){return this.types},e.prototype.withPrecision=function(t){return new e($t($t({},this.toObject()),{precision:t}))},e.prototype.getPrecision=function(){return this.precision},e}(p);var te=function(){return(te=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},ee=te(te({},t),{apiKey:""});const oe=function(){function t(t,e){if(void 0===e&&(e=ee),this.externalLoader=t,this.options=te(te({},ee),e),!this.options.apiKey)throw new Error('An API key is required for the Yandex provider. Please add it in the "apiKey" option.')}return t.prototype.geocode=function(t,e,o){var r,n,i,s,a,u,p,l,d,h=this,y=c.getGeocodeQueryFromParameter(t,Ht);if(y.getIp())throw new Error("The Yandex provider does not support IP geolocation, only location geocoding.");this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"geocode-maps.yandex.ru",pathname:"1.x"}),!1===y.getBounded()?d="0":!0===y.getBounded()&&(d="1");var f=this.withCommonParams({geocode:y.getText()||"",rspn:d,ll:y.getProximity()?(null===(r=y.getProximity())||void 0===r?void 0:r.longitude)+","+(null===(n=y.getProximity())||void 0===n?void 0:n.latitude):void 0,spn:y.getSpan()?(null===(i=y.getSpan())||void 0===i?void 0:i.spanLongitude)+","+(null===(s=y.getSpan())||void 0===s?void 0:s.spanLatitude):void 0,bbox:y.getBounds()?(null===(a=y.getBounds())||void 0===a?void 0:a.longitudeSW)+","+(null===(u=y.getBounds())||void 0===u?void 0:u.latitudeSW)+"~"+(null===(p=y.getBounds())||void 0===p?void 0:p.longitudeNE)+","+(null===(l=y.getBounds())||void 0===l?void 0:l.latitudeNE):void 0},y);return e?this.executeRequest(f,e,{},{},o):new Promise((function(t,e){return h.executeRequest(f,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.geodecode=function(t,e,o,r){var n,i=this,s=c.getReverseQueryFromParameters(t,e,Zt),a=c.getCallbackFromParameters(e,o),u=c.getErrorCallbackFromParameters(e,o,r);this.externalLoader.setOptions({protocol:this.options.useSsl?"https":"http",host:"geocode-maps.yandex.ru",pathname:"1.x"});var p=this.withCommonParams({geocode:s.getCoordinates().longitude+","+s.getCoordinates().latitude,kind:s.getTypes()?null===(n=s.getTypes())||void 0===n?void 0:n[0]:void 0},s);return a?this.executeRequest(p,a,{},{},u):new Promise((function(t,e){return i.executeRequest(p,(function(e){return t(e)}),{},{},(function(t){return e(t)}))}))},t.prototype.withCommonParams=function(t,e){var o;return te(te({},t),{apikey:this.options.apiKey,format:"json",lang:e.getLocale(),results:e.getLimit().toString(),skip:null===(o=e.getSkip())||void 0===o?void 0:o.toString(),jsonpCallback:this.options.useJsonp?"callback":void 0})},t.prototype.executeRequest=function(e,o,r,n,i){this.externalLoader.executeRequest(e,(function(e){o(e.response.GeoObjectCollection.featureMember.map((function(e){return t.mapToGeocoded(e.GeoObject)})))}),r,n,i)},t.mapToGeocoded=function(t){var e,o,r,n=t.Point.pos.split(" "),i=parseFloat(n[1]),s=parseFloat(n[0]),a=(e=t.metaDataProperty.GeocoderMetaData.AddressDetails,o={},(r=function(t){Object.keys(t).forEach((function(e){var n=t[e];void 0!==n&&(function(t){var e=Array.isArray(t),o=Object.prototype.toString.call(t);return!(e||"[object Object]"!==o&&"[object Array]"!==o||!Object.keys(t).length)}(n)?r(n):o[e]=n)}))})(e),o),c=a.PremiseNumber,u=a.ThoroughfareName,p=a.DependentLocalityName,l=a.LocalityName,d=a.AdministrativeAreaName,h=a.CountryName,y=a.CountryNameCode,f=[t.metaDataProperty.GeocoderMetaData.kind],m=t.metaDataProperty.GeocoderMetaData.precision,b=Xt.create({coordinates:{latitude:i,longitude:s},streetNumber:c,streetName:u,subLocality:p,locality:l,region:d,country:h,countryCode:y,types:f,precision:m});["AdministrativeAreaName","SubAdministrativeAreaName"].forEach((function(t,e){a[t]&&b.addAdminLevel(g.create({level:e+1,name:a[t]||""}))}));var v=t.boundedBy.Envelope.lowerCorner.split(" "),w=t.boundedBy.Envelope.upperCorner.split(" ");return b=b.withBounds({latitudeSW:parseFloat(v[1]),longitudeSW:parseFloat(v[0]),latitudeNE:parseFloat(w[1]),longitudeNE:parseFloat(w[0])})},t}();var re=o(98),ne=o.n(re),ie=function(){return(ie=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},se={protocol:"http",method:"GET"};const ae=function(){function t(t){void 0===t&&(t=se),this.options=se,this.setOptions(t)}return t.prototype.setOptions=function(t){this.options=ie(ie({},se),t)},t.prototype.getOptions=function(){return this.options},t.prototype.executeRequest=function(e,o,r,n,i){var s=this.options,c=s.protocol,u=s.host,p=s.pathname,l=s.method;if(!u)throw new Error("A host is required for the external loader.");if(!p)throw new Error("A pathname is required for the external loader.");var d=new URL(c+"://"+u+"/"+p),h=e.jsonpCallback,y=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(e,["jsonpCallback"]),f=a(y);if(Object.keys(f).forEach((function(t){var e;return d.searchParams.append(t,null!==(e=f[t])&&void 0!==e?e:"")})),h)t.runJsonpCallback(d,o,h);else{var g=a(r||{});ne()(d.toString(),{headers:g,method:l,body:"POST"===l?JSON.stringify(n):void 0}).then((function(t){if(!t.ok)throw new b("Received HTTP status code "+t.status+" when attempting geocoding request.",t);return t.json()})).then((function(t){return o(t)})).catch((function(t){i&&t instanceof b?i(t):setTimeout((function(){throw t}))}))}},t.runJsonpCallback=function(e,o,r){if(!s())throw new Error('"jsonpCallback" parameter can only be used in a browser environment.');e.searchParams.append(r,t.generateJsonpCallback(o));var n=document.createElement("script");n.src=e.toString(),document.getElementsByTagName("head")[0].appendChild(n)},t.generateJsonpCallback=function(t){var e=Date.now(),o="jsonp"+Math.round(e+1000001*Math.random());return window[o]=function(e){t(e),delete window[o]},o},t}();var ce=function(){return(ce=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const ue=function(){function e(){}return e.createProvider=function(e){var o=ce(ce({},t),"string"==typeof e?{provider:e}:e),r=new ae,n=o.provider,i=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(o,["provider"]);switch(n){case"bing":case"bingmaps":case"microsoft":return new O(r,ce(ce({},w),i));case"chain":return new _(ce(ce({},P),i));case"geoplugin":return new T(r,i);case"google":case"googlemaps":return new D(r,i);case"locationiq":return new $(r,ce(ce({},V),i));case"mapbox":return new lt(r,ce(ce({},pt),i));case"mapquest":return new wt(r,ce(ce({},vt),i));case"openstreetmap":case"nominatim":return new It(r,ce(ce({},Lt),i));case"opencage":return new Wt(r,ce(ce({},Gt),i));case"yandex":return new oe(r,ce(ce({},ee),i))}},e}(),pe=function(){function t(){this.version="0.1.0"}return t.createGeocoder=function(t){return ue.createProvider(t)},t}();var le=function(){return(le=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};const de=function(){function t(){}return t.dump=function(e){var o=t.baseGeoJson,r=e.toObject(),n=r.coordinates,i=r.bounds,s=r.adminLevels,a=function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]])}return o}(r,["coordinates","bounds","adminLevels"]),c=le({},a);return Object.keys(c).forEach((function(t){return void 0===c[t]&&delete c[t]})),s&&s.length>0&&(c=le(le({},c),{adminLevels:s.map((function(t){return t.toObject()}))})),o=le(le({},o),{properties:c}),n&&(o=le(le({},o),{geometry:le(le({},o.geometry),{type:"Point",coordinates:[parseFloat(n.longitude.toString()),parseFloat(n.latitude.toString())]})})),i&&(o=le(le({},o),{bbox:[parseFloat(i.longitudeSW.toString()),parseFloat(i.latitudeSW.toString()),parseFloat(i.longitudeNE.toString()),parseFloat(i.latitudeNE.toString())]})),o},t.baseGeoJson={type:"Feature",properties:{},geometry:{type:"Point",coordinates:[0,0]}},t}();var he="object"==typeof window?window:{};he.UniversalGeocoder=pe,he.GeoJsonDumper=de})()})();